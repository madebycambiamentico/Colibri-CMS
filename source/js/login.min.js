/**
 * @author: nereo costacurta
 *
 * @project: colibrì CMS | madebycambiamentico
 * @description: login script.
 *
 * @require: [jquery.js >= 1.11.3]
 *
 * @license: GPLv3
 * @copyright: (C)2016 nereo costacurta
 */
function checkform(o){var e=$("#my-name").val().trim();if(""==e)return alert("Inserire il nome!"),!1;var n=$("#my-password").val().trim();if(n.length<4)return alert("La password è troppo corta!"),!1;var r=new jsSHA("SHA-512","TEXT");return r.update(n),$("#my-hashed-pass").val(r.getHash("HEX")),$.isFunction(o)&&o(),!0}function log(){return LOGGING?(alert("Login già in corso, attendi."),!1):(LOGGING=!0,$loader=$("#loader").removeClass("done"),void(checkform(function(){console.log("l false"),$.post("database/login.php",$("#my-login").serialize(),null,"json").success(function(o){return console.log(o),o.error!==!1?alert("ERRORE\n"+o.error):void location.assign("./bacheca")}).error(function(o){alert("Ooops!"),$loader.addClass("done"),LOGGING=!1,console.log(o)})})||(LOGGING=!1,$loader.addClass("done"))))}var LOGGING=!1;$(function(){$("#my-login").submit(function(o){o.preventDefault()}),$("#my-login input").keypress(function(o){return 13==o.which?(log(),!1):void 0}),$("#send-me").click(log)});