!function(a,b,c,d){"use strict";a.fn.simpleLightbox=function(d){var d=a.extend({overlay:!0,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",close:!0,closeText:"Ã—",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:.8,heightRatio:.9,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1},d),h=(b.navigator.pointerEnabled||b.navigator.msPointerEnabled,0),i=0,j=a(),k=function(){var a=c.body||c.documentElement,a=a.style;return""==a.WebkitTransition?"-webkit-":""==a.MozTransition?"-moz-":""==a.OTransition?"-o-":""==a.transition&&""},l=!1,m=[],n=function(b,c){var d=a(c.selector).filter(function(){return a(this).attr("rel")===b});return d},o=d.rel&&d.rel!==!1?n(d.rel,this):this,k=k(),p=k!==!1,q="simplelb",r=a("<div>").addClass("sl-overlay"),s=a("<button>").addClass("sl-close").html(d.closeText),t=a("<div>").addClass("sl-spinner").html("<div></div>"),u=a("<div>").addClass("sl-navigation").html('<button class="sl-prev">'+d.navText[0]+'</button><button class="sl-next">'+d.navText[1]+"</button>"),v=a("<div>").addClass("sl-counter").html('<span class="sl-current"></span>/<span class="sl-total"></span>'),w=!1,x=0,y=a("<div>").addClass("sl-caption pos-"+d.captionPosition),z=a("<div>").addClass("sl-image"),A=a("<div>").addClass("sl-wrapper").addClass(d.className),B=function(b){return!d.fileExt||"a"==a(b).prop("tagName").toLowerCase()&&new RegExp(".("+d.fileExt+")$","i").test(a(b).attr("href"))},C=function(){d.close&&s.appendTo(A),d.showCounter&&o.length>1&&(v.appendTo(A),v.find(".sl-total").text(o.length)),d.nav&&u.appendTo(A),d.spinner&&t.appendTo(A)},D=function(b){b.trigger(a.Event("show.simplelightbox")),d.disableScroll&&M("hide"),A.appendTo("body"),z.appendTo(A),d.overlay&&r.appendTo(a("body")),w=!0,x=o.index(b),j=a("<img/>").hide().attr("src",b.attr("href")),m.indexOf(b.attr("href"))==-1&&m.push(b.attr("href")),z.html("").attr("style",""),j.appendTo(z),H(),r.fadeIn("fast"),a(".sl-close").fadeIn("fast"),t.show(),u.fadeIn("fast"),a(".sl-wrapper .sl-counter .sl-current").text(x+1),v.fadeIn("fast"),E(),d.preloading&&J(),setTimeout(function(){b.trigger(a.Event("shown.simplelightbox"))},d.animationSpeed)},E=function(c){if(j.length){var e=new Image,f=a(b).width()*d.widthRatio,g=a(b).height()*d.heightRatio;e.src=j.attr("src"),a(e).on("error",function(b){if(o.eq(x).trigger(a.Event("error.simplelightbox")),w=!1,l=!0,t.hide(),d.alertError)return alert(d.alertErrorMessage),void K(1==c||c==-1?c:1)}),e.onload=function(){"undefined"!=typeof c&&o.eq(x).trigger(a.Event("changed.simplelightbox")).trigger(a.Event((1===c?"nextDone":"prevDone")+".simplelightbox")),m.indexOf(j.attr("src"))==-1&&m.push(j.attr("src"));var h=e.width,i=e.height;if(h>f||i>g){var k=h/i>f/g?h/f:i/g;h/=k,i/=k}a(".sl-image").css({top:(a(b).height()-i)/2+"px",left:(a(b).width()-h)/2+"px"}),t.hide(),j.css({width:h+"px",height:i+"px"}).fadeIn("fast"),l=!0;var n="self"==d.captionSelector?o.eq(x):o.eq(x).find(d.captionSelector);if("data"==d.captionType)var q=n.data(d.captionsData);else if("text"==d.captionType)var q=n.html();else var q=n.prop(d.captionsData);if(d.loop||(0==x&&a(".sl-prev").hide(),x>=o.length-1&&a(".sl-next").hide(),x>0&&a(".sl-prev").show(),x<o.length-1&&a(".sl-next").show()),1==o.length&&a(".sl-prev, .sl-next").hide(),1==c||c==-1){var r={opacity:1};d.animationSlide&&(p?(G(0,100*c+"px"),setTimeout(function(){G(d.animationSpeed/1e3,"0px"),50})):r.left=parseInt(a(".sl-image").css("left"))+100*c+"px"),a(".sl-image").animate(r,d.animationSpeed,function(){w=!1,F(q)})}else w=!1,F(q);d.additionalHtml&&0==a(".sl-additional-html").length&&a("<div>").html(d.additionalHtml).addClass("sl-additional-html").appendTo(a(".sl-image"))}}},F=function(b){""!=b&&"undefined"!=typeof b&&d.captions&&y.html(b).hide().appendTo(a(".sl-image")).delay(d.captionDelay).fadeIn("fast")},G=function(b,c){var d={};d[k+"transform"]="translateX("+c+")",d[k+"transition"]=k+"transform "+b+"s linear",a(".sl-image").css(d)},H=function(){a(b).on("resize."+q,E),a(c).on("click."+q+" touchstart."+q,".sl-close",function(a){a.preventDefault(),l&&L()}),u.on("click."+q,"button",function(b){b.preventDefault(),h=0,K(a(this).hasClass("sl-next")?1:-1)});var e=0,f=0,g=0,j=0,k=!1,m=0;z.on("touchstart."+q+" mousedown."+q,function(a){return!!k||(p&&(m=parseInt(z.css("left"))),k=!0,e=a.originalEvent.pageX||a.originalEvent.touches[0].pageX,g=a.originalEvent.pageY||a.originalEvent.touches[0].pageY,!1)}).on("touchmove."+q+" mousemove."+q+" pointermove MSPointerMove",function(a){return!k||(a.preventDefault(),f=a.originalEvent.pageX||a.originalEvent.touches[0].pageX,j=a.originalEvent.pageY||a.originalEvent.touches[0].pageY,h=e-f,i=g-j,void(d.animationSlide&&(p?G(0,-h+"px"):z.css("left",m-h+"px"))))}).on("touchend."+q+" mouseup."+q+" touchcancel."+q+" mouseleave."+q+" pointerup pointercancel MSPointerUp MSPointerCancel",function(a){if(k){k=!1;var b=!0;d.loop||(0==x&&h<0&&(b=!1),x>=o.length-1&&h>0&&(b=!1)),Math.abs(h)>d.swipeTolerance&&b?K(h>0?1:-1):d.animationSlide&&(p?G(d.animationSpeed/1e3,"0px"):z.animate({left:m+"px"},d.animationSpeed/2)),d.swipeClose&&Math.abs(i)>50&&Math.abs(h)<d.swipeTolerance&&L()}})},I=function(){u.off("click","button"),a(c).off("click."+q,".sl-close"),a(b).off("resize."+q)},J=function(){var b=x+1<0?o.length-1:x+1>=o.length-1?0:x+1,c=x-1<0?o.length-1:x-1>=o.length-1?0:x-1;a("<img />").attr("src",o.eq(b).attr("href")).load("load",function(){console.info("loaded image"),m.indexOf(a(this).attr("src"))==-1&&m.push(a(this).attr("src")),o.eq(x).trigger(a.Event("nextImageLoaded.simplelightbox"))}),a("<img />").attr("src",o.eq(c).attr("href")).on("load",function(){console.info("loaded image"),m.indexOf(a(this).attr("src"))==-1&&m.push(a(this).attr("src")),o.eq(x).trigger(a.Event("prevImageLoaded.simplelightbox"))})},K=function(b){o.eq(x).trigger(a.Event("change.simplelightbox")).trigger(a.Event((1===b?"next":"prev")+".simplelightbox"));var c=x+b;if(!(w||(c<0||c>=o.length)&&0==d.loop)){x=c<0?o.length-1:c>o.length-1?0:c,a(".sl-wrapper .sl-counter .sl-current").text(x+1);var e={opacity:0};d.animationSlide&&(p?G(d.animationSpeed/1e3,-100*b-h+"px"):e.left=parseInt(a(".sl-image").css("left"))+-100*b+"px"),a(".sl-image").animate(e,d.animationSpeed,function(){setTimeout(function(){var c=o.eq(x);j.attr("src",c.attr("href")),m.indexOf(c.attr("href"))==-1&&t.show(),a(".sl-caption").remove(),E(b),d.preloading&&J()},100)})}},L=function(){if(!w){var b=o.eq(x),c=!1;b.trigger(a.Event("close.simplelightbox")),a(".sl-image img, .sl-overlay, .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter").fadeOut("fast",function(){d.disableScroll&&M("show"),a(".sl-wrapper, .sl-overlay").remove(),I(),c||b.trigger(a.Event("closed.simplelightbox")),c=!0}),j=a(),l=!1,w=!1}},M=function(d){if("hide"==d){var e=b.innerWidth;if(!e){var f=c.documentElement.getBoundingClientRect();e=f.right-Math.abs(f.left)}if(c.body.clientWidth<e){var g=c.createElement("div"),h=parseInt(a("body").css("padding-right"),10);g.className="sl-scrollbar-measure",a("body").append(g);var i=g.offsetWidth-g.clientWidth;a(c.body)[0].removeChild(g),a("body").data("padding",h),i>0&&a("body").addClass("hidden-scroll").css({"padding-right":h+i})}}else a("body").removeClass("hidden-scroll").css({"padding-right":a("body").data("padding")})};return C(),o.on("click."+q,function(b){if(B(this)){if(b.preventDefault(),w)return!1;D(a(this))}}),a(c).on("click."+q+" touchstart."+q,function(b){l&&d.docClose&&0==a(b.target).closest(".sl-image").length&&0==a(b.target).closest(".sl-navigation").length&&L()}),d.disableRightClick&&a(c).on("contextmenu",".sl-image img",function(a){return!1}),d.enableKeyboard&&a(c).on("keyup."+q,function(a){if(a.preventDefault(),h=0,l){var b=a.keyCode;27==b&&L(),37!=b&&39!=a.keyCode||K(39==a.keyCode?1:-1)}}),this.open=function(b){b=b||a(this[0]),D(b)},this.next=function(){K(1)},this.prev=function(){K(-1)},this.close=function(){L()},this.destroy=function(){a(c).unon("click."+q).unon("keyup."+q),L(),a(".sl-overlay, .sl-wrapper").remove(),this.off("click")},this.refresh=function(){this.destroy(),a(this.selector).simpleLightbox(d)},this}}(jQuery,window,document);